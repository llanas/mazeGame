{"version":3,"sources":["webpack://[name]/./src/algo/mazegen/mazegen-bomb-impl.ts","webpack://[name]/./src/algo/mazegen/mazegen-build-impl.ts","webpack://[name]/./src/index.ts","webpack://[name]/./src/model/door.ts","webpack://[name]/./src/model/maze-grid.ts","webpack://[name]/./src/model/square.ts","webpack://[name]/./src/model/treeNode.ts","webpack://[name]/./src/utils/drawer.ts","webpack://[name]/./src/utils/utils.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import IMazeGenerator from \"./mazegen-interface\";\r\nimport MazeGrid from \"../../model/maze-grid\";\r\nimport Square from \"../../model/square\";\r\nimport Utils from \"../../utils/utils\";\r\nimport Door from \"../../model/door\";\r\n\r\nexport default class BombMazeGenerator implements IMazeGenerator {\r\n    \r\n    isGenerationOver: boolean;\r\n    mazeGrid: MazeGrid;\r\n\r\n    listSquareNumberZero = 1;\r\n    listDoorsAvailable: Door[];\r\n\r\n    constructor(_mazeGrid: MazeGrid) {\r\n        this.mazeGrid = _mazeGrid;\r\n        this.isGenerationOver = false;\r\n        this.listDoorsAvailable = _mazeGrid.listDoors.filter(door => door.isOpenable);\r\n    }\r\n\r\n    step(): void {\r\n\r\n        let rand = Utils.getRandomInt(this.listDoorsAvailable.length);\r\n        let doorInProgress = this.listDoorsAvailable[rand];\r\n    \r\n        let squareMin = (doorInProgress.isVertical) ? \r\n            this.mazeGrid.getSquare(doorInProgress.x - 1, doorInProgress.y) : \r\n            this.mazeGrid.getSquare(doorInProgress.x, doorInProgress.y - 1);\r\n\r\n        let squareMax = this.mazeGrid.getSquare(doorInProgress.x, doorInProgress.y);\r\n\r\n        let minNumber = Math.min(squareMin.number, squareMax.number);\r\n        let maxNumber = Math.max(squareMin.number, squareMax.number);\r\n        \r\n        if(minNumber != maxNumber) {\r\n            for (let i = 0; i < this.mazeGrid.listSquares.length; i++) {\r\n                const square = this.mazeGrid.listSquares[i];\r\n                if(square.number === maxNumber) {\r\n                    square.number = minNumber;\r\n                    if(minNumber === 0) this.listSquareNumberZero++;\r\n                }\r\n            }\r\n            \r\n            squareMin.isTreated = true;\r\n            squareMax.isTreated = true;\r\n            doorInProgress.open();\r\n        }\r\n\r\n        this.listDoorsAvailable.splice(rand, 1);\r\n        \r\n        if(this.listSquareNumberZero === this.mazeGrid.listSquares.length) {\r\n            this.mazeGrid.isFullyGenerated = true;\r\n        }\r\n    }\r\n}","import IMazeGenerator from \"./mazegen-interface\";\r\nimport MazeGrid from \"../../model/maze-grid\";\r\nimport Square from \"../../model/square\";\r\nimport Utils from \"../../utils/utils\";\r\nimport Door from \"../../model/door\";\r\n\r\nexport default class BuildMazeGenerator implements IMazeGenerator {\r\n\r\n    isGenerationOver: boolean;\r\n    mazeGrid: MazeGrid;\r\n\r\n    squareTreatedPool: Square[];\r\n\r\n    constructor(_mazeGrid: MazeGrid) {\r\n        this.mazeGrid = _mazeGrid;\r\n        this.isGenerationOver = false;\r\n        this.squareTreatedPool = [];\r\n    }\r\n\r\n    step(): void {\r\n        let squareInProgress;\r\n        if(this.squareTreatedPool.length == 0) {\r\n            squareInProgress = this.mazeGrid.getSquareByPosition(Utils.getRandomInt(this.mazeGrid.listSquares.length));\r\n            this.squareTreatedPool.push(squareInProgress);\r\n        } else {\r\n            squareInProgress = this.squareTreatedPool[this.squareTreatedPool.length - 1];\r\n        }\r\n\r\n        let neighboursAvailable = [];\r\n        \r\n        let topSquare = this.testDoor(squareInProgress, squareInProgress.topDoor);\r\n        if(topSquare != null && !topSquare.isTreated) neighboursAvailable.push(topSquare);\r\n        \r\n        let rightSquare = this.testDoor(squareInProgress, squareInProgress.rightDoor);\r\n        if(rightSquare != null && !rightSquare.isTreated) neighboursAvailable.push(rightSquare);\r\n        \r\n        let bottomSquare = this.testDoor(squareInProgress, squareInProgress.bottomDoor);\r\n        if(bottomSquare != null && !bottomSquare.isTreated) neighboursAvailable.push(bottomSquare);\r\n        \r\n        let leftSquare = this.testDoor(squareInProgress, squareInProgress.leftDoor);\r\n        if(leftSquare != null && !leftSquare.isTreated) neighboursAvailable.push(leftSquare);\r\n        \r\n        if(neighboursAvailable.length !== 0) {\r\n            let nextSquareToTreat = neighboursAvailable[Utils.getRandomInt(neighboursAvailable.length)];\r\n            nextSquareToTreat.isInSolutionPath = true;\r\n            this.mazeGrid.openDoorBetweenSquares(squareInProgress, nextSquareToTreat);\r\n            this.squareTreatedPool.push(nextSquareToTreat);\r\n        } else {\r\n            this.squareTreatedPool[this.squareTreatedPool.length - 1].isInSolutionPath = false;\r\n            this.squareTreatedPool.splice(this.squareTreatedPool.length - 1, 1);\r\n        }\r\n        if(this.squareTreatedPool.length === 0) {\r\n            this.mazeGrid.isFullyGenerated = true;\r\n        }\r\n    }\r\n\r\n    testDoor(square: Square, door: Door) {\r\n        let nextSquare = null;\r\n        if(door.isOpenable && !door.isOpen) {\r\n            nextSquare = this.mazeGrid.getSquareByDoor(square, door);\r\n        }\r\n        return nextSquare;\r\n    }\r\n}","import MazeGrid from \"./model/maze-grid\";\r\nimport Drawer from \"./utils/drawer\";\r\nimport IMazeGenerator from \"./algo/mazegen/mazegen-interface\";\r\nimport BuildMazeGenerator from \"./algo/mazegen/mazegen-build-impl\";\r\nimport BombMazeGenerator from \"./algo/mazegen/mazegen-bomb-impl\";\r\nimport TreeNode from \"./model/treeNode\";\r\n\r\nlet maze: MazeGrid = null;\r\nlet mazeGenAlgo: IMazeGenerator;\r\nlet drawer: Drawer = null;\r\n\r\nexport function init() {\r\n    initMaze();\r\n\r\n    drawer = new Drawer(\"map\");\r\n    drawer.drawMaze(maze);\r\n    drawer.display();\r\n}\r\n\r\nexport function initMaze() {\r\n    let _mapWidthInput = <HTMLInputElement> document.getElementById(\"mapWidth\");\r\n    let _mapHeightInput = <HTMLInputElement> document.getElementById(\"mapHeight\");\r\n    maze = new MazeGrid(_mapWidthInput.valueAsNumber, _mapHeightInput.valueAsNumber);\r\n    mazeGenAlgo = _getMazeGenAlgo();\r\n}\r\n\r\nexport function process() {\r\n    if(maze != null) {\r\n        if(maze.isFullyGenerated) {\r\n            maze.resetMaze();\r\n            mazeGenAlgo = _getMazeGenAlgo();\r\n        }\r\n        console.time(\"mazeGen\");\r\n        try {\r\n            while(!maze.isFullyGenerated) {\r\n                mazeGenAlgo.step();\r\n            }\r\n        } finally {\r\n            console.timeEnd(\"mazeGen\");\r\n        }\r\n        drawer.drawMaze(maze);\r\n    }\r\n}\r\n\r\nexport function step() {\r\n    if(maze != null && mazeGenAlgo != null) {\r\n        if(mazeGenAlgo.isGenerationOver) {\r\n            console.log(\"Maze is fully generated\");\r\n        } else {\r\n            mazeGenAlgo.step();\r\n            drawer.drawMaze(maze);\r\n        }\r\n    }\r\n}\r\n\r\nexport function solution() {\r\n    console.time(\"mazeSolution\");\r\n    let treeNode = new TreeNode(maze, maze.getSquareByPosition(0));\r\n    let solutionPath = treeNode.getPathToSquare(maze.listSquares[maze.listSquares.length - 1]);\r\n    console.timeEnd(\"mazeSolution\");\r\n    for (let i = 0; i < solutionPath.length; i++) {\r\n        solutionPath[i].isInSolutionPath = true;\r\n    }\r\n    drawer.drawMaze(maze);\r\n}\r\n\r\nfunction _getMazeGenAlgo(): IMazeGenerator {\r\n    let _algoGenInput = <HTMLInputElement> document.querySelector('input[name=\"algoInput\"]:checked');\r\n    switch(_algoGenInput.value) {\r\n        case \"build\": \r\n            return new BuildMazeGenerator(maze);\r\n        case \"bomb\": \r\n            return new BombMazeGenerator(maze);\r\n    }\r\n}","export default class Door {\r\n\r\n    static listDoors: Door[] = [];\r\n\r\n    isOpenable: boolean;\r\n    isOpen: boolean;\r\n\r\n    x: number;\r\n    y: number;\r\n    isVertical: boolean;\r\n\r\n    constructor(_mapX: number, _mapY: number, _isVertical: boolean, _isOpenable: boolean) {\r\n        this.isOpenable = _isOpenable;\r\n        this.isOpen = false;\r\n        this.x = _mapX;\r\n        this.y = _mapY;\r\n        this.isVertical = _isVertical;\r\n\r\n        Door.listDoors.push(this);\r\n    }\r\n\r\n    open(): void {\r\n        if (this.isOpenable) {\r\n            this.isOpen = true;\r\n        }\r\n    }\r\n}\r\n","import Square from \"./square\";\r\nimport Door from \"./door\";\r\n\r\nexport default class MazeGrid {\r\n    \r\n    public mazeWidth: number;\r\n    public mazeHeight: number;\r\n    public grid: Square[][] = [];\r\n    public isFullyGenerated: boolean = false;\r\n\r\n    public listSquares: Square[] = [];\r\n    public listDoors: Door[] = [];\r\n\r\n    resetMaze() {\r\n        this.listSquares = [];\r\n        this.listDoors = [];\r\n        this.grid = [];\r\n        this.isFullyGenerated = false;\r\n        \r\n        this.generateGrid();\r\n        this.generateDoors();\r\n    }\r\n\r\n    constructor(_mazeWidth: number, _mazeHeight: number) {\r\n        this.mazeWidth = _mazeWidth;\r\n        this.mazeHeight = _mazeHeight;\r\n\r\n        this.generateGrid();\r\n        this.generateDoors();\r\n    }\r\n\r\n    private generateGrid(): void {\r\n        for(let x = 0; x < this.mazeWidth; x++) {\r\n            let colomn: Square[] = [];\r\n            this.grid.push(colomn);\r\n            for(let y = 0; y < this.mazeHeight; y++) {\r\n                let square = this._buildSquare(x, y);\r\n                colomn.push(square);\r\n            }\r\n        }\r\n    }\r\n\r\n    private generateDoors() {\r\n        for (let i = 0; i < this.listSquares.length; i++) {\r\n            const square = this.listSquares[i];\r\n\r\n            if(square.y !== 0) {\r\n                square.topDoor = this.getSquareByPosition(square.position - 1).bottomDoor;\r\n            } else {\r\n                square.topDoor = this._buildDoor(square.x, square.y, false, false);\r\n            }\r\n\r\n            if(square.x !== 0) {\r\n                square.leftDoor = this.getSquareByPosition(square.position - this.mazeHeight).rightDoor;\r\n            } else {\r\n                square.leftDoor = this._buildDoor(square.x, square.y, true, false);\r\n            }\r\n\r\n            square.rightDoor = this._buildDoor(square.x + 1, square.y, true, square.x !== this.mazeWidth - 1);\r\n            square.bottomDoor = this._buildDoor(square.x, square.y + 1, false, square.y !== this.mazeHeight - 1);\r\n        }\r\n    }\r\n\r\n    getSquare(_gridX: number, _gridY: number): Square {\r\n        if(_gridX < this.mazeWidth && _gridY < this.mazeHeight) {\r\n            return this.grid[_gridX][_gridY];\r\n        } else {\r\n            throw \"La case demandé n'est pas dans le labyrinthe\";\r\n        }\r\n    }\r\n\r\n    getSquareByPosition(position: number): Square {\r\n        return this.listSquares[position];\r\n        // return this.grid[Math.round(position / (this.mazeWidth / this.mazeHeight))][(position % this.mazeHeight) - 1];\r\n    }\r\n\r\n    getSquareByDoor(basedSquare: Square, door: Door): Square {\r\n        let xPosition;\r\n        let yPosition;\r\n        if(door.isOpenable) {\r\n            if(door.isVertical) {\r\n                xPosition = (door.x === basedSquare.x) ? door.x - 1 : door.x;\r\n                yPosition = door.y;\r\n            } else {\r\n                xPosition = door.x;\r\n                yPosition = (door.y === basedSquare.y) ? door.y - 1 : door.y\r\n            }\r\n            return this.getSquare(xPosition, yPosition);\r\n        } else {\r\n            throw \"La porte n'est pas ouvrable\";\r\n        }\r\n    }\r\n\r\n    openDoorBetweenSquares(squareMax: Square, squareMin: Square): void {\r\n        if(squareMin === squareMax) {\r\n            throw \"Impossible d'ouvrir la porte, entre une même case! Revois ton code ;)\";\r\n        }\r\n        if(squareMin.position > squareMax.position) {\r\n            let squareTemp = squareMax;\r\n            squareMax = squareMin;\r\n            squareMin = squareTemp;\r\n        }\r\n\r\n        switch(squareMax.position - squareMin.position) {\r\n            case 1: \r\n                squareMin.bottomDoor.open();\r\n                squareMin.isTreated = true;\r\n                squareMax.isTreated = true;\r\n                break;\r\n            case this.mazeHeight:\r\n                squareMin.rightDoor.open();\r\n                squareMin.isTreated = true;\r\n                squareMax.isTreated = true;\r\n                break;\r\n            default:\r\n                throw `Impossible d'ouvrir la porte, les cases n°${squareMin.position} et n°${squareMax.position} ne sont pas adjacentes`;\r\n        }\r\n    }\r\n\r\n    private _buildSquare(_positionX: number, _positionY: number): Square {\r\n        let newSquare = new Square(this.listSquares.length, _positionX, _positionY);\r\n        this.listSquares.push(newSquare);\r\n        return newSquare;\r\n    }\r\n\r\n    private _buildDoor(_positionX: number, _positionY: number, _isVerticale: boolean, _isOpenable: boolean): Door {\r\n        let newDoor = new Door(_positionX, _positionY, _isVerticale, _isOpenable);\r\n        this.listDoors.push(newDoor);\r\n        return newDoor;\r\n    }\r\n}","import Door from \"./door\";\r\n\r\nexport default class Square {\r\n\r\n    public static listSquares: Square[] = [];\r\n\r\n    position: number;\r\n    number: number;\r\n    x: number;\r\n    y: number;\r\n    isTreated: boolean;\r\n    isInSolutionPath: boolean;\r\n\r\n    topDoor: Door;\r\n    rightDoor: Door;\r\n    bottomDoor: Door;\r\n    leftDoor: Door;\r\n\r\n    constructor(_number: number, _mapX: number, _mapY: number) {\r\n        this.position = _number;\r\n        this.number = _number;\r\n        this.x = _mapX;\r\n        this.y = _mapY;\r\n        this.isTreated = false;\r\n        \r\n        Square.listSquares.push(this);\r\n    }\r\n\r\n    getDoorsOpen(): Door[] {\r\n        let listDoorsOpen: Door[] = [];\r\n\r\n        if(this.topDoor.isOpen) listDoorsOpen.push(this.topDoor);\r\n        if(this.rightDoor.isOpen) listDoorsOpen.push(this.rightDoor);\r\n        if(this.bottomDoor.isOpen) listDoorsOpen.push(this.bottomDoor);\r\n        if(this.leftDoor.isOpen) listDoorsOpen.push(this.leftDoor);\r\n        \r\n        return listDoorsOpen;\r\n    }\r\n\r\n    getColor(): string {\r\n        if(this.isInSolutionPath) {\r\n            return 'rgb(125, 125, 200)'\r\n        } else{\r\n            return (this.isTreated) ? 'rgb(200, 225, 55)' : 'rgb(220, 90, 90)';\r\n        }\r\n    }\r\n}\r\n","import Square from \"./square\";\r\nimport MazeGrid from \"./maze-grid\";\r\nimport Door from \"./door\";\r\n\r\nclass Node {\r\n    partOf: number[] = [];\r\n    endPath: number = null;\r\n}\r\n\r\nexport default class TreeNode {\r\n\r\n    listPaths: Square[][] = [];\r\n    numberMap: Map<number, Node>;\r\n\r\n    constructor(mazeGrid: MazeGrid, squareA: Square) {\r\n        if(mazeGrid.isFullyGenerated) {\r\n            this.initNumberMap(mazeGrid);\r\n            let squareADoorsOpen = squareA.getDoorsOpen();\r\n            for (let i = 0; i < squareADoorsOpen.length; i++) {\r\n                this.getPathFromSquare(mazeGrid, squareA, [squareADoorsOpen[i]]);\r\n            }\r\n        } else {\r\n            throw \"Le labyrinthe n'est pas entièrement généré\";\r\n        }\r\n    }\r\n\r\n    initNumberMap(mazeGrid: MazeGrid) {\r\n        this.numberMap = new Map();\r\n        for (let i = 0; i < mazeGrid.listSquares.length; i++) {\r\n            this.numberMap.set(mazeGrid.listSquares[i].position, new Node());\r\n        }\r\n    }\r\n\r\n    getPathToSquare(square: Square): Square[] {\r\n        let path: Square[] = [square]\r\n        let squareIterator = square;\r\n\r\n        while(true) {\r\n            let squareNode: Node = this.numberMap.get(squareIterator.position);\r\n            let pathIterator: Square[] = [];\r\n            if(squareNode.endPath != null) {\r\n                pathIterator = this.listPaths[squareNode.endPath];\r\n                pathIterator.pop();\r\n            } else if(squareNode.partOf.length === 1) {\r\n                pathIterator = this.listPaths[squareNode.partOf[0]];\r\n                if(squareIterator !== square) {\r\n                    pathIterator.splice(pathIterator.indexOf(squareIterator) - 1);\r\n                } else {\r\n                    pathIterator.splice(pathIterator.indexOf(squareIterator));   \r\n                }\r\n            }\r\n            pathIterator.push(...path);\r\n            path = pathIterator;\r\n            squareIterator = path[0];\r\n\r\n            if(squareIterator.position === 0) {\r\n                return path;\r\n            }\r\n        }\r\n    }\r\n    \r\n    getPathFromSquare(mazeGrid: MazeGrid, square: Square, _doorsToTreat?: Door[]): Square[] {\r\n        // Initialisation\r\n        let path: Square[] = [];\r\n        this.listPaths.push(path);\r\n        \r\n        let squareIterator = square;\r\n        let doorsToTreat = _doorsToTreat;\r\n        let actualPath = this.listPaths.length - 1;\r\n        \r\n        while(true) {\r\n            \r\n            // Setteur\r\n            path.push(squareIterator);\r\n            switch(doorsToTreat.length) {\r\n                case 0: // Cul de sac\r\n                    this.numberMap.get(squareIterator.position).endPath = actualPath;\r\n                    return;\r\n                case 1: // aller\r\n                    this.numberMap.get(squareIterator.position).partOf.push(actualPath);\r\n                    squareIterator = mazeGrid.getSquareByDoor(squareIterator, doorsToTreat[0]);\r\n                    let doorsComeBy = doorsToTreat[0];\r\n                    doorsToTreat = squareIterator.getDoorsOpen();\r\n                    doorsToTreat.splice(doorsToTreat.indexOf(doorsComeBy), 1);\r\n                    break;\r\n                default: // node\r\n                    for (let i = 0; i < doorsToTreat.length; i++) {\r\n                        this.getPathFromSquare(mazeGrid, squareIterator, [doorsToTreat[i]]);\r\n                    }\r\n                    this.numberMap.get(squareIterator.position).endPath = actualPath;\r\n                    return;\r\n            }\r\n        }\r\n    }\r\n}","import MazeGrid from \"../model/maze-grid\";\r\nimport Square from \"../model/square\";\r\nimport Door from \"../model/door\";\r\n\r\nconst squareSize = 20;\r\n\r\nexport default class Drawer {\r\n\r\n    canvas: HTMLCanvasElement;\r\n    context: CanvasRenderingContext2D;\r\n\r\n    constructor(_canvasId: string) {\r\n        this.canvas = <HTMLCanvasElement> document.getElementById(_canvasId);\r\n        if(this.canvas.getContext) {\r\n            this.context = this.canvas.getContext(\"2d\");\r\n        } else {\r\n            throw \"Le canvas demandé n'existe pas ou n'est pas un élément canvas\";\r\n        }\r\n    }\r\n\r\n    display() {\r\n        this.canvas.hidden = false;\r\n    }\r\n\r\n    drawMaze(_mazeGrid: MazeGrid): void {\r\n        if(_mazeGrid != null && _mazeGrid.grid.length != 0) {\r\n            this.canvas.width = _mazeGrid.mazeWidth * squareSize;\r\n            this.canvas.height = _mazeGrid.mazeHeight * squareSize;\r\n            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n            for (let x = 0; x < _mazeGrid.mazeWidth; x++) {\r\n                for (let y = 0; y < _mazeGrid.mazeHeight; y++) {\r\n                    this.drawSquare(_mazeGrid.grid[x][y]);\r\n                }\r\n            }\r\n            for (let i = 0; i < _mazeGrid.listDoors.length; i++) {\r\n                this.drawDoor(_mazeGrid.listDoors[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n    drawSquare(_square: Square): void {\r\n        this.context.fillStyle = _square.getColor();\r\n        this.context.fillRect(_square.x * squareSize, _square.y * squareSize, squareSize, squareSize);\r\n    }\r\n\r\n    drawDoor(_door: Door): void {\r\n        if (!_door.isOpen) {\r\n            this.context.fillStyle = 'rgb(0,0,0)';\r\n            if (_door.isVertical) {\r\n                this.context.fillRect((_door.x * squareSize) - 1, _door.y * squareSize, 1, squareSize);\r\n            }\r\n            else {\r\n                this.context.fillRect(_door.x * squareSize, (_door.y * squareSize) - 1, squareSize, 1);\r\n            }\r\n        }\r\n    }\r\n}\r\n","export default class Utils {\r\n\r\n    static getRandomInt(maxValue: number): number {\r\n        return Math.floor(Math.random() * Math.floor(maxValue));\r\n    }\r\n}"],"sourceRoot":""}